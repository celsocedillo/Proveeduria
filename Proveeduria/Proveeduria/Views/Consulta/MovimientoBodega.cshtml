@{
    ViewBag.Title = "Punto de Re-Orden";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Movimiento bodega
    </h1>

</section>

<!-- begin panel -->
<div class="panel panel-inverse">
    <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">
            <i class="fa fa-filter" aria-hidden="true"></i> Movimiento bodega
        </h4>
    </div>
    <div class="panel-body">
        <div class="form-horizontal">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="FechaInicio">
                                Fecha inicio
                            </label>
                            <div class="col-sm-6">
                                <input id="FechaInicio" name="FechaInicio" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="FechaFin">
                                Fecha fin
                            </label>
                            <div class="col-sm-6">
                                <input id="FechaFin" name="FechaFin" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="CodigoMovimiento">
                                Código movimiento
                            </label>
                            <div class="col-sm-6">
                                <input id="CodigoMovimiento" name="CodigoMovimiento" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="CodigoDocumento">
                                Código documento
                            </label>
                            <div class="col-sm-6">
                                <input id="CodigoDocumento" name="CodigoDocumento" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="IdItem">
                                Item
                            </label>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <input id="IdItem" name="IdItem" type="text" class="form-control" />
                                    <span class="input-group-btn">
                                        <button id="btnListaItems" type="button" class="btn btn-inverse">
                                            <i class="fa fa-search" aria-hidden="true"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="TipoMovimiento">
                                Tipo de movimiento
                            </label>
                            <div class="col-md-6 col-sm-6">
                                <select id="TipoMovimiento" name="TipoMovimiento" style="width:100%;">
                                    <option value="todos">TODOS</option>
                                    <option value="1">AUTORIZADO</option>
                                    <option value="2">NO AUTORIZADO</option>
                                    <option value="3">ANULADO</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-horizontal form-ajust">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="NumeroIngresoEgreso">
                                Número Ingreso/Egreso
                            </label>
                            <div class="col-sm-6">
                                <input id="NumeroIngresoEgreso" name="NumeroIngresoEgreso" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="btnConsult" type="button" class="btn btn-inverse" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Consultando...">
                <i class="fa fa-search-plus" aria-hidden="true"></i>   CONSULTAR
            </button>
            <button id="btnConsult" type="button" class="btn btn-inverse" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Consultando...">
                <i class="fa fa-search-plus" aria-hidden="true"></i>   PDF
            </button>
            <button id="btnExcel" type="button" class="btn btn-inverse" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Consultando...">
                <i class="fa fa-search-plus" aria-hidden="true"></i>   EXCEL
            </button>
        </div>
    </div>
</div>
<!-- end panel -->

<!-- Main content -->
<section class="content">
    <!-- begin panel -->
    <div class="box">
        <div class="box-body no-padding">
            <table id="tablaMovimientos" class="table table-striped hover compact">
                <thead>
                    <tr>
                        <th>Código movimiento</th>
                        <th>Código documento</th>
                        <th>Tipo movimiento</th>
                        <th>Item</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Valor</th>
                        <th>Fecha</th>
                        <th>Ingreso/Egreso</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <!-- end panel -->
</section>

@section scripts {
    <script type="text/javascript">
        var tablaMovimientos;
        var inicio;
        var fin;
        var idItem;
        var codigoMovimiento;
        var tipoMovimieno;

        $(document).ready(function () {





            tablaMovimientos = $("#tablaMovimientos").DataTable({
                autoWidth: false,
                processing: true,
                scrollX: true,
                serverSide: true,
                info: true,
                stateSave: true,
                ajax: {
                    url: "/Consulta/GetMovimientos",
                    type: "POST",
                    data: function (d) {
                        d.inicio = inicio,
                        d.fin = fin,
                        d.idItem = idItem,
                        d.codigoMovimiento = codigoMovimiento,
                        d.tipoMovimieno = tipoMovimieno
                    },
                    error: function () {
                    }
                },
                columns: [
                    { data: "codigoMovimiento", orderable: true },
                    { data: "tipoMovimiento", orderable: true },
                    { data: "item", orderable: true },
                    { data: "descripcion", orderable: false },
                    { data: "cantidad", orderable: false },
                    { data: "valor", orderable: false },
                    { data: "fecha", orderable: false }
                ],
                "order": [[0, 'desc']]
            });



            $("#btnConsult").click(function (event) {
                event.preventDefault();
                inicio = $("#FechaInicio").val();
                fin = $("#FechaFin").val();
                numeroEgresoIngreso = $("#NumeroIngresoEgreso").val();
                codigoMovimiento = $("#CodigoMovimiento").val();
                CodigoDocumento = $("#CodigoDocumento").val();
                idItem = $("#IdItem").val();
                tipoMovimieno = $("#TipoMovimiento").val();
                numeroEgresoIngreso = $("#NumeroIngresoEgreso").val();
                if (inicio == "" || inicio == undefined) {
                    inicio = "vacio";
                }
                if (fin == "" || fin == undefined) {
                    fin = "vacio";
                }
                if (numeroEgresoIngreso == "" || numeroEgresoIngreso == undefined) {
                    numeroEgresoIngreso = "vacio";
                }
                if (codigoMovimiento == "" || codigoMovimiento == undefined) {
                    codigoMovimiento = "vacio";
                }
                if (idItem == "" || idItem == undefined) {
                    idItem = "vacio";
                }
                if (tipoMovimieno == "" || tipoMovimieno == undefined) {
                    tipoMovimieno = "vacio";
                }
                tablaMovimientos.ajax.reload();
            });

























        });
    </script>
}



